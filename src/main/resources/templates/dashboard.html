



<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html" >
<head>
  <meta charset="UTF-8">
  <meta th:name="_csrf" th:content="${_csrf.token}"/>
  <meta th:name="_csrf_header" th:content="${_csrf.headerName}"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>User Dashboard</title>
  <link rel="stylesheet" href="../css/dashboard.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.4/font/bootstrap-icons.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
  <!-- SweetAlert2 CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.2/dist/sweetalert2.min.css">

  <!-- SweetAlert2 JS -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.2/dist/sweetalert2.min.js"></script>
  <link
          rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
  />
</head>
<body>
<nav th:replace="partials/navBar"></nav>
<!-- header and other content -->
<header>


</header>

<main>

  <!--the coin table chart lives in the tabpanel div, each tab button calls getChart() with different queries-->
  <div class="container">
    <section class="row">
      <div class="d-flex align-items-start">
        <div class="nav col-md-2 flex-column nav-pills me-3" id="v-pills-tab" role="tablist" aria-orientation="vertical">
          <!--           Add the "Create Watchlist" button after the "Watchlist 1" button-->
          <button class="nav-link" id="create-watchlist-btn" data-bs-toggle="modal" data-bs-target="#createWatchlistModal" type="button">Create Watchlist</button>
          <!-- Create the modal with the form -->
          <div class="modal fade" id="createWatchlistModal" tabindex="-1" aria-labelledby="createWatchlistModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="createWatchlistModalLabel">Create Watchlist</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">

                  <form id="create-watchlist-form">

                    <div class="mb-3">
                      <label for="watchlist-name" class="form-label">Watchlist Name</label>
                      <input type="text" class="form-control" id="watchlist-name" required>
                    </div>
                    <div class="form-group">
                      <label for="search">Search for coins:</label>
                      <div class="input-group mb-3">
                        <input type="text" class="form-control" id="search" placeholder="Search for coins">
                      </div>
                      <ul id="searchResults" style="list-style-type: none; padding: 0;"></ul>
                    </div>
                    <div class="mb-3">
                      <label for="added-coins" class="form-label">Added Coins</label>
                      <ul class="list-group" id="added-coins">
                        <!-- Added coins will be listed here with delete functionality -->
                      </ul>
                    </div>
                    <button type="submit" class="btn btn-primary text-center">Create Watchlist</button>
                  </form>
                </div>
              </div>
            </div>
          </div>

          <button class="nav-link active" id="v-pills-home-tab" data-bs-toggle="pill" data-bs-target="#v-pills-coinTable" type="button" role="tab" aria-controls="v-pills-watchlist1" aria-selected="true" onclick="getChart('https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&category=binance-smart-chain&per_page=10&page=1&sparkline=true&price_change_percentage=1h%2C24h%2C7d&locale=en');clearChart()">Watchlist 1</button>
        </div>
        <div class="tab-content" id="v-pills-tabContent">

          <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-coinTable-tab">
            <div class="container">
              <section class="row">
                <table class="table table-dark">
                  <thead id="tableHead">
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col" style="cursor:pointer;" onclick="sortTable(0)">name</th>
                    <th scope="col">ticker</th>
                    <th scope="col">price</th>
                    <th scope="col">1h</th>
                    <th scope="col">24h</th>
                    <th scope="col">7d</th>
                    <th scope="col" style="cursor:pointer;">volume</th>
                    <th scope="col">marketcap</th>
                    <th scope="col">24h Hi</th>
                    <th scope="col">24h Lo</th>
                    <th scope="col">Candles</th>
                    <th scope="col">Last 7 days</th>
                  </tr>
                  </thead>
                  <tbody id="coinChart"></tbody>
                </table>
              </section>

              <!--live chart-->
              <section>
                <div class="row">

                  <div id="coin-description"></div>


                  <div id="chartButtons"></div>
                  <div style="position:relative" id="liveChart"></div>
                  <div id="chartBottom"></div>
                </div>



              </section>
            </div> <!--DOM populate -->

          </div>
        </div>
      </div>
    </section>

  </div>
</main>
<script src="https://code.jquery.com/jquery-3.6.4.min.js" crossorigin="anonymous"></script>
<script src="/jquery-sparkline.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-sparklines/2.1.2/jquery.sparkline.min.js"></script>
<script src="/js/dashboard.js"></script>

<!--scripts-->
<script>
  let topBtn = document.getElementById("topBtn");

  // When the user scrolls down 20px from the top of the document, show the button
  window.onscroll = function() {scrollFunction()};

  function scrollFunction() {
    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
      topBtn.style.display = "block";
    } else {
      topBtn.style.display = "none";
    }
  }

  function topFunction() {
    document.body.scrollTop = 0;
    document.documentElement.scrollTop = 0;
  }

</script>



</body>
<div th:replace="partials/partials :: footer"></div>
</html>

